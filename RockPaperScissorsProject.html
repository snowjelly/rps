<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
            let gameCount = parseInt(prompt("How many games would you like to play?"));
            let playerSelection = "";
            let computerSelection = "";
            let playerWins = 0;
            let computerWins = 0;
            let ties = 0;
            let currentStreak = 0;
            let tieStreak = 0;
            let winStreak = 0;
            let loseStreak = 0;
            let result = "";
            let resultString = "";


            const winString = "You won!";
            const loseString = "You lost. Try again.";
            const tieString = "You tied.";
            const invalidString = "Invalid string. Please refresh the page and enter 'rock', 'paper', or 'scissors'";

            // right now i want it to print out your highest streak at the end of the game
            // future additions could include making a leaderboard, UI, and then eventually online multiplayer.
            function game(gameCount) {

                for (let i = 0; i < gameCount; i++) {
                    playerSelection = prompt("Enter 'rock', 'paper', or 'scissors'");
                    computerSelection = getComputerChoice();

                    console.log(playRound(playerSelection, computerSelection));
                    //console.log(playRound('rock', 'rock'));
                }
                console.log("In the " + gameCount + " game(s) you played. You won " + playerWins + ", tied " + ties + ", and lost " + computerWins);
            }
            game(gameCount);
            
            function getComputerChoice() {
                let computerSelection = Math.floor(Math.random()*3);

                //convert Math.random result into something readable
                if (computerSelection === 0) {
                    computerSelection = 'rock';
                }
                if (computerSelection === 1) {
                    computerSelection = 'paper';
                }
                if (computerSelection === 2) {
                    computerSelection = 'scissors';
                }

                return computerSelection;
            }



            function playRound(playerSelection, computerSelection) {
                //Game logic
                if (playerSelection === 'rock') {
                    if (computerSelection === 'rock') {
                        ties++;
                        if (result != "" && result != "tie") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                            tieStreak = currentStreak;
                        }
                        result = "tie";
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;

                    }
                    if (computerSelection === 'paper') {
                        computerWins++;
                        if (result != "" && result != "lose") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "lose"
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                    if (computerSelection === 'scissors') {
                        playerWins++;
                        if (result != "" && result != "win") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "win";
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                }
                else if (playerSelection === 'paper') {
                    if (computerSelection === 'rock') {
                        playerWins++;
                        if (result != "" && result != "win") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "win";
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                    if (computerSelection === 'paper') {
                        ties++;
                        if (result != "" && result != "tie") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "tie";
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                    if (computerSelection === 'scissors') {
                        computerWins++;
                        if (result != "" && result != "lose") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "lose"
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                }
                else if (playerSelection === 'scissors') {
                    if (computerSelection === 'rock') {
                        computerWins++;
                        if (result != "" && result != "lose") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "lose"
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                    if (computerSelection === 'paper') {
                        playerWins++;
                        if (result != "" && result != "win") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "win";
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                    if (computerSelection === 'scissors') {
                        ties++;
                        if (result != "" && result != "tie") { //checks previous set result value. if it's the same increment the currentStreak, otherwise set it to 0.
                            currentStreak = 1;
                        } else {
                            currentStreak++;
                        }
                        result = "tie";
                        return "The computer chose " + computerSelection + ". You " + result + ". You now have a " + result + " streak of " + currentStreak;
                    }
                }
                else {
                    return invalidString;
                }
            }

      

        </script>
    </body>
</html>